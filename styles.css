:root{
  --pt-card-w: 320px;
  --pt-card-h: 180px;
  --pt-radius: 18px;
  --pt-shadow: 0 12px 30px rgba(0,0,0,.35);
}
.theme-dark { --pt-bg: #0e1422; --pt-fg:#e6ecff; }
.theme-light{ --pt-bg: #f6f7fb; --pt-fg:#11131a; }

.parallax-stage{ perspective: 900px; perspective-origin: 50% 50%; }
.parallax-stage.center { display:flex; justify-content:center; }
.parallax-stage.right  { display:flex; justify-content:flex-end; }
.parallax-stage.left   { display:flex; justify-content:flex-start; }

/* Resizable wrapper with grip */
.parallax-resizer{
  display:inline-block;
  position:relative;
  resize: both;
  overflow: auto;
  min-width: 200px;
  min-height: 120px;
  max-width: 1400px;
  max-height: 900px;
  border-radius: 14px;
}
.parallax-resizer::after{
  content:'';
  position:absolute; right:6px; bottom:6px;
  width:14px; height:14px; border-radius:3px;
  background: linear-gradient(135deg, rgba(255,255,255,.2), rgba(255,255,255,.05));
  border: 1px solid rgba(255,255,255,.18);
  pointer-events:none;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.2);
}

.parallax-wrap{ position:relative; } /* used for translation offsets */

.parallax-card{
  width: var(--pt-card-w); height: var(--pt-card-h);
  border-radius: var(--pt-radius);
  transform-style: preserve-3d; box-shadow: var(--pt-shadow);
  position: relative; overflow: hidden; background: var(--pt-bg);
  outline: 1px solid rgba(255,255,255,.06);
  will-change: transform;
}
.parallax-layer{ position:absolute; inset:0; transform-style: preserve-3d; }
.parallax-layer > img{ width:100%; height:100%; object-fit:cover; display:block; }

/* Badge (optional) */
.parallax-badge{ position:absolute; right:10px; top:10px; z-index:5; transform: translateZ(26px); }
.parallax-badge > span{
  background: linear-gradient(90deg,#00e5ff,#7cfbde);
  color:#001018; font-weight:700; padding:4px 8px; border-radius:999px;
  box-shadow: 0 4px 12px rgba(0,229,255,.35);
}

/* Moving gloss and edge */
.parallax-gloss{ position:absolute; inset:-40%; pointer-events:none; mix-blend-mode:screen;
  background: radial-gradient(circle at var(--gx,50%) var(--gy,50%), rgba(255,255,255,.28), rgba(255,255,255,.08) 22%, rgba(255,255,255,0) 55%);
  filter: blur(20px); transform: translateZ(30px);
}
.parallax-edge{ position:absolute; inset:0; pointer-events:none; mix-blend-mode:screen;
  background: linear-gradient(145deg, rgba(0,255,255,.16), rgba(0,0,0,0) 30%, rgba(124,251,222,.18) 70%, rgba(0,0,0,0));
  transform: translateZ(28px);
}

/* External controls row */
.parallax-controls{
  display:flex; gap:8px; align-items:center; margin:6px 0 14px 0;
}
.parallax-controls button{
  padding:6px 10px; border-radius:8px; border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06); color: var(--pt-fg); cursor:pointer;
}
.parallax-controls button:hover{ background: rgba(255,255,255,.1); }
.parallax-controls .hint{ opacity:.7; font-size:12px; margin-left:auto; }

@media (prefers-reduced-motion: reduce){
  .parallax-card{ transform:none!important; }
  .parallax-gloss{ display:none; }
}